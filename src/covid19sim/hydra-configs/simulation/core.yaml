GLOBAL_MOBILITY_SCALING_FACTOR: 1.0 # Mobility reduction factor

# NOISE IN SIM PARAMETERS
LOCATION_TECH: "gps" # &location-tech

# CITY PARAMETERS
MIN_AVG_HOUSE_AGE: 15

# n - people per location
LOCATION_DISTRIBUTION:
  {
    "store":
      {
        "n": 500,
        "area": 0.15,
        "social_contact_factor": 0.7,
        "surface_prob": [0.1, 0.1, 0.3, 0.2, 0.3],
        "rnd_capacity": [30, 100],
      },
    "workplace":
      {
        "n": 50,
        "area": 0.2,
        "social_contact_factor": 0.3,
        "surface_prob": [0.1, 0.1, 0.3, 0.2, 0.3],
        "rnd_capacity": null,
      },
    "school":
      {
        "n": 500,
        "area": 0.05,
        "social_contact_factor": 0.8,
        "surface_prob": [0.1, 0.1, 0.3, 0.2, 0.3],
        "rnd_capacity": null,
      },
    "senior_residency":
      {
        "n": 500,
        "area": 0.05,
        "social_contact_factor": 0.8,
        "surface_prob": [0.1, 0.1, 0.3, 0.2, 0.3],
        "rnd_capacity": null,
      },
    "household":
      {
        "n": 2.6,
        "area": 0.30,
        "social_contact_factor": 1.0,
        "surface_prob": [0.1, 0.1, 0.3, 0.2, 0.3],
        "rnd_capacity": null,
      },
    "park":
      {
        "n": 250,
        "area": 0.05,
        "social_contact_factor": 0.2,
        "surface_prob": [0.8, 0.05, 0.05, 0.05, 0.05],
        "rnd_capacity": null,
      },
    "misc":
      {
        "n": 40,
        "area": 0.15,
        "social_contact_factor": 0.8,
        "surface_prob": [0.1, 0.1, 0.3, 0.2, 0.3],
        "rnd_capacity": [300, 500],
      },
    "hospital":
      {
        "n": 1000,
        "area": 0.05,
        "social_contact_factor": 0.4,
        "surface_prob": [0.0, 0.0, 0.0, 0.0, 1.0],
        "rnd_capacity": [2, 5],
      },
  }

# house_size: 1 2 3 4 5
OTHERS_WORKPLACE_CHOICE: [1.0, 0.0, 0.0]


# The group age proportion (p) are taken from Statistics Canada
# ref: https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1710000501
# ref: https://www12.statcan.gc.ca/census-recensement/2011/as-sa/98-312-x/2011003/fig/fig3_4-4-eng.cfm
# TODO: senior_residency should be adjusted w.r.t. to the actual number of people per bin to combine them.
HOUSE_SIZE_PREFERENCE: [0.45, 0.5, 0.005, 0.035, 0.01]
HUMAN_DISTRIBUTION: # this is parsed into tuple keys in utils.py/parse_configuration e.g. "0-10" => (0, 10)
  {
    "0-10":
      {
        "p": 0.106,
        "residence_preference":
          {
            "house_size": [0.0, 0.2, 0.25, 0.35, 0.2],
            "senior_residency": 0.0,
          },
        "profession_profile":
          {
            "healthcare": 0.0, "school": 1.0, "others": 0.0, "retired": 0.0
          },
      },
    "10-20":
      {
        "p": 0.110,
        "residence_preference":
          {
            "house_size": [0.00, 0.2, 0.55, 0.15, 0.1],
            "senior_residency": 0.0,
          },
        "profession_profile":
          {
            "healthcare": 0.0, "school": 0.85, "others": 0.15, "retired": 0.0
          },
      },
    "20-30":
      {
        "p": 0.136,
        "residence_preference":
          {
            "house_size": [0.2, 0.3, 0.3, 0.1, 0.1],
            "senior_residency": 0.0,
          },
        "profession_profile":
          {
            "healthcare": 0.06, "school": 0.02, "others": 0.92, "retired": 0.0
          },
      },
    "30-40":
      {
        "p": 0.138,
        "residence_preference":
          {
            "house_size": [0.1, 0.3, 0.30, 0.10, 0.2],
            "senior_residency": 0.0,
          },
        "profession_profile":
          {
            "healthcare": 0.06, "school": 0.02, "others": 0.92, "retired": 0.0
          },
      },
    "40-50":
      {
        "p": 0.128,
        "residence_preference":
          {
            "house_size": [0.1, 0.4, 0.2, 0.2, 0.1],
            "senior_residency": 0.0,
          },
        "profession_profile":
          {
            "healthcare": 0.06, "school": 0.02, "others": 0.92, "retired": 0.00
          },
      },
    "50-60":
      {
        "p": 0.140,
        "residence_preference":
          {
            "house_size": [0.2, 0.6, 0.1, 0.05, 0.05],
            "senior_residency": 0.0,
          },
        "profession_profile":
          {
            "healthcare": 0.06, "school": 0.02, "others": 0.92, "retired": 0.0
          },
      },
    "60-70":
      {
        "p": 0.123,
        "residence_preference":
          {
            "house_size": [0.25, 0.6, 0.05, 0.05, 0.05],
            "senior_residency": 0.009,
          },
        "profession_profile":
          {
            "healthcare": 0.01, "school": 0.01, "others": 0.68, "retired": 0.3
          },
      },
    "70-80":
      {
        "p": 0.076,
        "residence_preference":
          {
            "house_size": [0.1, 0.6, 0.15, 0.05, 0.1],
            "senior_residency": 0.07,
          },
        "profession_profile":
          {
            "healthcare": 0.01, "school": 0.0, "others": 0.04, "retired": 0.95
          },
      },
    "80-101":
      {
        "p": 0.043,
        "residence_preference":
          {
            "house_size": [0.15, 0.5, 0.1, 0.15, 0.1],
            "senior_residency": 0.4,
          },
        "profession_profile":
          {
            "healthcare": 0.0, "school": 0.0, "others": 0.0, "retired": 1.0
          },
      },
  }

# INDIVIDUAL DIFFERENCES PARAMETERS
P_CAREFUL_PERSON: 0.3 # &carefulness
P_TRAVELLED_INTERNATIONALLY_RECENTLY: 0.05

# Source: COVID-19 individual-based model with instantaneous contract tracing (Table 9)
# TODO: link to the document
SMARTPHONE_OWNER_FRACTION_BY_AGE:
  {
    '0-10': 0.0,
    '10-20': 0.90,
    '20-30': 0.96,
    '30-40': 0.95,
    '40-50': 0.91,
    '50-60': 0.81,
    '60-70': 0.64,
    '70-80': 0.41,
    '80-101': 0.27,
  }

# DISEASE PARAMETERS
AVG_INCUBATION_DAYS: 5 # &avg-incubation-days FIXME:unused
SCALE_INCUBATION_DAYS: 0.5 # FIXME:unused
INFECTIOUSNESS_ONSET_DAYS_WRT_SYMPTOM_ONSET: 2.5 # relative to incubation days FIXME:unused
AVG_RECOVERY_DAYS: 14 # FIXME:unused
SCALE_RECOVERY_DAYS: 4 # FIXME:unused
INFECTION_RADIUS: 200 # cms
INFECTION_DURATION: 15 # minutes
#                   0-9 10-19 20-29  30-39  40-49  50-59 60-69 70-79  80-  # Assuming dath rate to be same for 80 and above
P_NEVER_RECOVERS: [0, 0.002, 0.002, 0.002, 0.004, 0.02, 0.04, 0.08, 0.15] # &never_recovers
REINFECTION_POSSIBLE: False # [0, 1]
# aerosol    copper      cardboard       steel       plastic
MAX_DAYS_CONTAMINATION: [0.125, 0.333333, 1, 2, 3] # https://www.nejm.org/doi/pdf/10.1056/NEJMc2004973?articleTools=true
VIRAL_LOAD_MIN: 0.0001 # FIXME:unused
VIRAL_LOAD_NORMALIZATION: 2 # FIXME:unused

# VIRAL LOAD PARAMS
MIN_VIRAL_LOAD: 0.1
MAX_VIRAL_LOAD: 0.4

PLATEAU_START_MEAN: 2.5
PLATEAU_START_STD: 0.1
PLATEAU_START_CLIP_LOW: 2.25
PLATEAU_START_CLIP_HIGH: 2.75

PLATEAU_DURATION_MEAN: 5.5
PLATEAU_DURATION_STD: 1
PLATEAU_DURATION_CLIP_LOW: 3.0
PLATEAU_DURATION_CLIP_HIGH: 9.0

RECOVERY_MEAN: 6
RECOVERY_STD: 1
RECOVERY_CLIP_LOW: 2.5
RECOVERY_CLIP_HIGH: 10
VIRAL_LOAD_RECOVERY_FACTOR: 3 # higher initial viral load means longer recovery

# INCUBATION PARAMS
SYMPTOM_ONSET_WRT_VIRAL_LOAD_PEAK_AVG: 0.6 # DAYS
SYMPTOM_ONSET_WRT_VIRAL_LOAD_PEAK_STD: 0.05
INCUBATION_DAYS_GAMMA_SHAPE: 5.807 # Refer Table 2 (Appendix) in https://www.acpjournals.org/doi/10.7326/M20-0504 for parameters of lognormal fit
INCUBATION_DAYS_GAMMA_SCALE: 0.948

# ASYMTPOMATIC
BASELINE_P_ASYMPTOMATIC: 0.20 # &p-asymptomatic
ASYMPTOMATIC_INFECTION_RATIO: 0.1 # &prob_infectious

# convex combination - if it sums to 1. Unused, because there is no data on it.
INFECTION_DISTANCE_FACTOR: 0.0
INFECTION_DURATION_FACTOR: 0.0

# TESTING
# capacity is proportion of population tested per day
TEST_TYPES: { "lab": {
        "capacity": 0.001,  # ! /!\ This is now a proportion of population, not an absolute (int) value
        "time_to_result": {
          "in-patient": 0.33, # days
          "out-patient": 2.0, # verbal communication with H&A (find-source)
          },
        "P_FALSE_NEGATIVE": {
            "days_since_exposure": [1, 4, 5, 8, 9, 21],
            "rate": [1, 0.67, 0.38, 0.2, 0.21, 0.66],
            }, # https://www.acc.org/latest-in-cardiology/journal-scans/2020/05/18/13/42/variation-in-false-negative-rate-of-reverse?utm_source=journalscan&utm_medium=email_newsletter&utm_campaign=journalscan&utm_content=20200521
        "P_FALSE_POSITIVE": 0.00, # verbal communication with H&A (find-source)
        "preference": 1, # TODO: preference might depend on symptoms
      } }

P_TEST_MODERATE: 0.4
P_TEST_MILD: 0.1
P_TEST_SEVERE: 1.0
GET_TESTED_SYMPTOMS_CHECKED_IN_HOSPITAL: ["mild", "moderate", "severe", "fever", "chills", "gastro", "diarrhea", "cough", "fatigue", "trouble_breathing", "loss_of_taste", "light_trouble_breathing", "mild_trouble_breathing", "moderate_trouble_breathing", "heavy_trouble_breathing" ]
GET_TESTED_SYMPTOMS_CHECKED_BY_SELF: ["cough", "fever", "trouble_breathing", "chills", "loss_of_taste", ""]

# SEASONAL ALLERGIES
P_ALLERGIES: 0.4 # proportion of population; https://www.healthline.com/health/allergies/statistics#1
# P_HAS_ALLERGIES_TODAY: 0.005 # likelihood to start allergy any day (2-3 times per year) # produces too many allergies (experimental)
P_HAS_ALLERGIES_TODAY: 0.0005

# OTHER TRANSMISSIBLE DISEASES
# P_FLU_TODAY: 0.003 # # likelihood to start flu any day (1 per year)

# https://www.webmd.com/cold-and-flu/flu-statistics
# Flu season is December to February. Assuming simulation runs form March, we are switching off Flu
P_FLU_TODAY: 0.000
FLU_CONTAGIOUSNESS: 0.05
AVG_FLU_DURATION: 5

# likelihood to start cold any day (2-3 times per year) # https://www.cdc.gov/features/rhinoviruses/index.html
P_COLD_TODAY: 0.005
COLD_CONTAGIOUSNESS: 0.0005 # likelihood of transmitting at an encounter (no-source)
AVG_COLD_DURATION: 3 # FIXME:unused

# LIFESTYLE PARAMETERS
RHO: 0.40
GAMMA: 0.1

## SHOP
AVG_SHOP_TIME_MINUTES: 30 # @param
SCALE_SHOP_TIME_MINUTES: 15
AVG_SCALE_SHOP_TIME_MINUTES: 10
SCALE_SCALE_SHOP_TIME_MINUTES: 5
NUM_WEEKLY_GROCERY_RUNS: 2 # @param FIXME:unused

AVG_MAX_NUM_SHOP_PER_WEEK: 5
SCALE_MAX_NUM_SHOP_PER_WEEK: 1

AVG_NUM_SHOPPING_DAYS: 3
SCALE_NUM_SHOPPING_DAYS: 1
AVG_NUM_SHOPPING_HOURS: 3
SCALE_NUM_SHOPPING_HOURS: 1
MAX_STORE_QUEUE_LENGTH: 10

## WORK
AVG_WORKING_MINUTES: 480 # 8 * 60
SCALE_WORKING_MINUTES: 60 # 1 * 60
AVG_SCALE_WORKING_MINUTES: 120 # 2 * 60
SCALE_SCALE_WORKING_MINUTES: 60 # 1 * 60

## EXERCISE
AVG_EXERCISE_MINUTES: 60
SCALE_EXERCISE_MINUTES: 15
AVG_SCALE_EXERCISE_MINUTES: 15
SCALE_SCALE_EXERCISE_MINUTES: 5

AVG_MAX_NUM_EXERCISE_PER_WEEK: 5
SCALE_MAX_NUM_EXERCISE_PER_WEEK: 2
AVG_NUM_EXERCISE_DAYS: 3
SCALE_NUM_EXERCISE_DAYS: 1
AVG_NUM_EXERCISE_HOURS: 3
SCALE_NUM_EXERCISE_HOURS: 1

## MISC
AVG_MISC_MINUTES: 60
SCALE_MISC_MINUTES: 15
AVG_SCALE_MISC_MINUTES: 15
SCALE_SCALE_MISC_MINUTES: 5
AVG_MAX_NUM_MISC_PER_WEEK: 5
SCALE_MAX_NUM_MISC_PER_WEEK: 2

# ENCOUNTER CONDITIONS
MIN_MESSAGE_PASSING_DISTANCE: 0
MAX_MESSAGE_PASSING_DISTANCE: 1000 # cm GPS; 10 x 10 m grid everyone is a contact

# DISTANCE_ENCOUNTER PARAMETERS cms
MIN_DIST_ENCOUNTER: 20
MAX_DIST_ENCOUNTER: 300 # cms

# KNOBS
CONTAGION_KNOB: 1.4
ENVIRONMENTAL_INFECTION_KNOB: 0.0005

## INTERVENTIONS
# WASH HANDS
HYGIENE_EFFECT: 0.2 # FIXME:unused

# RISK RECOMMENDATIONS
DEFAULT_DISTANCE: 100 # cms

# TRACKER
EFFECTIVE_R_WINDOW: 10 # days

# MASK
MASK_EFFICACY_NORMIE: 0.32
MASK_EFFICACY_HEALTHWORKER: 0.98
BASELINE_P_MASK: 0.5 # FIXME:unused
MASKS_SUPPLY: 1000000
MASK_EFFICACY_FACTOR: 2 # used in reduction of probability o transmission (no-source)

# naive tracing
RISK_TRANSMISSION_PROBA: 0.03
BASELINE_RISK_VALUE: 0.01

# manual tracing
MANUAL_TRACING_P_CONTACT: 0.50
MANUAL_TRACING_DELAY_AVG: 3 # days
MANUAL_TRACING_DELAY_STD: 0.5 # days
